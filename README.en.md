# Cipher - Color Puzzle Crypto Game

Cipher is a competitive and multiplayer web-based puzzle game where players test their memory and color recognition skills. The project features a global leaderboard, country-based competition, and social interaction among players.

## 🚀 Project Overview

The core objective of the game is to have users memorize a colored pattern shown for a specific duration and then recreate the same pattern on a blank grid. Players earn points for their success, level up, and climb the leaderboards both individually and for their countries.

## ✨ Key Features

- **Memory Game:** A core game mechanic offering various difficulty levels with different grid sizes (from 2x2 to 30x30).
- **User Management:**
    - Secure registration and login (with JWT and bcryptjs).
    - Players can personalize their profiles: avatar upload, username, and password updates.
- **Leveling and Progression System:**
    - Players level up based on the number of games played (one level per 30 games).
    - Levels are visually indicated on player profiles.
- **Leaderboards:**
    - **Individual Leaderboard:** Lists the top 20 players with the highest scores.
    - **Country Leaderboard:** Ranks countries based on the total scores of their players.
- **Real-Time Chat:**
    - Socket.IO-based global and country-specific chat rooms.
    - Players can edit and delete their messages.
    - Active user list and typing indicator.
- **Admin Panel:**
    - A password-protected admin panel accessible via a separate `/admin.html` page.
    - User management (CRUD operations).
    - Viewing general statistics (total players, number of games played, etc.).
    - Clearing chat history and managing application settings.
- **Multi-Language Support:** The interface supports multiple languages in accordance with `i18n` (internationalization) standards.
- **Score Sharing:** Players can share their end-of-game scores on social media (X/Twitter) with a visual generated by `html2canvas`.

## 🛠️ Tech Stack

### Server (Backend)
- **Node.js:** Server-side runtime environment.
- **Express.js:** Web application framework.
- **PostgreSQL:** Relational database.
- **Socket.IO:** For real-time, bidirectional communication (chat).
- **JSON Web Tokens (JWT):** For secure authentication.
- **Bcrypt.js:** For password hashing.
- **Helmet:** For security headers (HTTP headers).
- **Multer:** For file uploads (avatars).

### Client (Frontend)
- **HTML5, CSS3, Vanilla JavaScript:** Core web technologies.
- **Socket.IO Client:** To establish a real-time connection with the server.
- **Chart.js:** For charts in the "Tokenomics" section.
- **html2canvas:** To create score-sharing visuals.
- **DOMPurify:** For client-side and server-side HTML sanitization to prevent XSS attacks.

### Testing
- **Mocha:** Test framework.
- **Chai:** BDD / TDD assertion library.
- **Supertest:** For HTTP testing.

## 📂 Project Structure

```
cipher/
├── public/                # Static files (HTML, CSS, JS, images)
│   ├── admin.html         # Admin panel interface
│   ├── index.html         # Main game and landing page
│   ├── css/               # Style files
│   └── js/                # Client-side JavaScript files (game, auth, chat, etc.)
├── routes/                # API routes (auth, profile, admin, etc.)
├── middleware/            # Express middleware (e.g., auth.js)
├── socket/                # Socket.IO event handlers
├── test/                  # Automated tests
├── .gitignore
├── constants.js           # Project-wide constants
├── db.js                  # Database connection and query logic
├── package.json           # Project dependencies and scripts
├── server.js              # Main server entry point
└── README.md              # This file
```

## 🚀 Setup and Launch

1.  **Clone the project:**
    ```bash
    git clone <repository-url>
    cd cipher
    ```

2.  **Install dependencies:**
    ```bash
    npm install
    ```

3.  **Set up the database:**
    - Create a PostgreSQL database.
    - Create a `.env` file in the project root and add your database connection details as follows:
      ```env
      DB_USER=your_db_user
      DB_HOST=localhost
      DB_DATABASE=your_db_name
      DB_PASSWORD=your_db_password
      DB_PORT=5432
      JWT_SECRET=your_super_secret_key
      ```
    - Run the necessary SQL commands to create the database schema (e.g., if there is a `schema.sql` file).

4.  **Start the project:**
    - To start in development mode:
      ```bash
      npm start
      ```
    - The server will run by default at `http://localhost:3000`.

5.  **Run tests:**
    ```bash
    npm test
    ```
